---
title: "풀잼"
description: "풀수록 재밌어지는 AI 솔루션"
date: 2025-02-25
---

![이미지](/posts/works-puljam/puljam-project-banner.jpeg)

> 2025.02 ~ 유지보수중  
> NestJS, K3s, ArgoCD, CloudFlare Images

### 프로젝트 설명

---

AI 인공지능 기반 전 과목 문제풀이 및 유사문제 출제 앱입니다.
자신이 모르는 문제 유형에 대해 계속 끊임없이 풀어보며, 유형에 대한 친밀감을 느낄 수 있도록 도와줄 수 있으며
유사 문제 출제를 통하여 실력을 향상시킬 수 있습니다.

### 프로젝트 내 역할

---

Backend & DevOps

### 주요 작업

---

- 해당 프로젝트에선 팀 내 AI API 서버로의 요청이 요구사항에 있었습니다. 다만 상대 API 측에선 재시도가 구현되어 있지 않았고, 이를 해결하기 위해 재시도 로직을 구성했습니다.

- 이용권과 구독권이 기반이 되는 서비스이기에, 서비스 1회 이용 시에도 데이터베이스 무결성이 중요했습니다. Prisma의 **낙관적 락**을 이용하여 이를 제어했습니다.

- 이용권 사용 가능 여부와 버전 확인 -> 외부 요청 -> 성공 시, 이용권 차감 및 버전 변경 -> 결과 반환

- CloudFlare Images의 **Pre-Signed URL**를 발급을 통해 대역폭 절감 및 보안 강화가 가능했습니다.

- 문자로 인증번호를 발급받는 시스템을 SOLAPI를 통해 구현하였는데, 이는 발송마다 비용이 부과되므로 하루 인증 횟수를 쿼리 하여 임계치에 도달 시, 예외를 발생시켰습니다.

- **@nestjs/schedule**를 이용, 매일 정각에 이용권이 사용자에게 배포되게 구현하였습니다.

- **class-validator** 및 **helmet**을 적용하여 취약점을 방지하고 리턴 값을 더욱

- 로그인 및 기타 외부 요청 등에 대한 과도한 요청으로 인한 서버 불안정을 대비하기 위해 **rate-limit**을 적용했습니다.

### 어려웠던점

---

처음 쿠버네티스 및 ArgoCD를 이용하여 배포를 해보는 거라, private ghcr에서 이미지를 불러올 때 키를 설정하지 않아 헤매는 등, 많은 문제가 있었습니다. 결국, **docker-registry secret** 설정을 통해 결국 배포할 수 있었지만, 시간을 소모하였습니다. 이런 시행착오를 걸쳐 다른 프로젝트 또한 쿠버네티스로 배포가 가능했습니다.

### 개선하고 싶거나 아쉬운점

---

- 개발 진행 시, TDD를 적용해 보지 못한 점이 아쉬워서 유지 보수하며 테스트 코드를 작성하여 배포 시 자동으로 확인 후 이상 검출 시 이전 버전으로 롤백 되는 과정을 만들고 싶습니다.
